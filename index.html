<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>libphonenumber Full Test Page</title>
    <!-- Include libphonenumber from CDNJS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/libphonenumber-js/1.9.47/libphonenumber-js.min.js"></script>
    <style>
        input, button, div { margin: 10px; }
        #countryCode {
            width: 300px; /* Adjusted width to fit placeholder text */
        }
    </style>
</head>
<body>
    <h2>Test libphonenumber Functionalities with One Click</h2>

    <input type="text" id="phoneNumber" placeholder="Enter phone number">
    <input type="text" id="countryCode" placeholder="Enter country code (e.g., 'US')">
    <div>
        <button onclick="runAllTests()">Run All Tests</button>
    </div>

    <div id="output"></div>

    <script>
        function runAllTests() {
            const inputNumber = document.getElementById("phoneNumber").value.trim();
            const countryCode = document.getElementById("countryCode").value.trim().toUpperCase();
            const outputDiv = document.getElementById("output");
            
            // Clear the output first
            outputDiv.innerHTML = "";

            try {
                // Check if inputNumber is provided
                if (!inputNumber) {
                    outputDiv.innerHTML = `<strong>Error:</strong> Please enter a phone number.`;
                    return;
                }

                // Parsing and full validation
                const phoneUtil = libphonenumber.parsePhoneNumber(inputNumber, countryCode);
                
                let output = `<strong>Phone Number Analysis:</strong><br>`;
                
                // Validate Number
                output += phoneUtil.isValid() ? "✅ Valid phone number<br>" : "❌ Invalid phone number<br>";

                // Get Number Type
                const type = phoneUtil.getType();
                output += `Number Type: ${type}<br>`;

                // Is Possible Number
                const possible = phoneUtil.isPossible();
                output += possible ? "Possible Number: ✅<br>" : "Possible Number: ❌<br>";

                // Format International and National Numbers
                const formattedInternational = phoneUtil.formatInternational();
                const formattedNational = phoneUtil.formatNational();
                output += `Formatted (International): ${formattedInternational}<br>`;
                output += `Formatted (National): ${formattedNational}<br>`;

                // Get Example Number (only if countryCode is provided)
                if (countryCode) {
                    try {
                        const exampleNumber = libphonenumber.getExampleNumber(countryCode);
                        output += `Example Number for ${countryCode}: ${exampleNumber.formatInternational()}<br>`;
                    } catch (error) {
                        output += `Error getting example number for ${countryCode}: ${error.message}<br>`;
                    }
                } else {
                    output += `Example Number: Please enter a valid country code to get an example number.<br>`;
                }

                // Find Numbers in Text
                try {
                    const numbersFound = libphonenumber.findNumbers(inputNumber, 'ANY');
                    if (numbersFound.length > 0) {
                        output += `Numbers Found in Input Text: ${numbersFound.map(num => num.rawInput).join(", ")}<br>`;
                    } else {
                        output += "No numbers found in input text<br>";
                    }
                } catch (error) {
                    output += `Error finding numbers in text: ${error.message}<br>`;
                }

                // Set the output to the div
                outputDiv.innerHTML = output;

            } catch (error) {
                outputDiv.innerHTML = `<strong>Error:</strong> ${error.message}`;
            }
        }
    </script>
</body>
</html>
